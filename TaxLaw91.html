<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حساب ضريبة الدخل | Tax Law App</title>
    <!-- لو الأيقونة بصيغة PNG -->
    <link rel="icon" type="image/png" href="https://www3.0zz0.com/2024/05/30/07/482205963.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #007bff;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --border-radius: 12px;
            --transition-speed: 0.3s;
            
            /* Light Mode Variables */
            --bg-color-light: #f0f4f8;
            --card-bg-light: #ffffff;
            --text-color-light: #333;
            --header-bg-light: linear-gradient(135deg, #007bff, #0056b3);
            --input-border-light: #ccc;
            --input-bg-light: #fff;
            --result-bg-light: #f8f9fa;
            --result-border-light: #e9ecef;
            --shadow-light: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --primary-color: #4dabf7;
            --secondary-color: #339af0;
            --success-color: #40c057;
            --danger-color: #fa5252;
            --warning-color: #fcc419;

            --bg-color-light: #121212;
            --card-bg-light: #1e1e1e;
            --text-color-light: #e0e0e0;
            --header-bg-light: linear-gradient(135deg, #1f3a5a, #102a43);
            --input-border-light: #444;
            --input-bg-light: #2c2c2c; /* Input background for dark mode */
            --result-bg-light: #252525;
            --result-border-light: #3a3a3a;
            --shadow-light: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-color-light);
            color: var(--text-color-light);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            transition: background-color var(--transition-speed), color var(--transition-speed);
            -webkit-user-select: none; /* منع تحديد النص في المتصفحات التي تعتمد على WebKit */
            -moz-user-select: none; /* منع تحديد النص في فايرفوكس */
            -ms-user-select: none; /* منع تحديد النص في إنترنت إكسبلورر */
            user-select: none; /* منع تحديد النص في المتصفحات الأخرى */  
        }

        .container {
            margin-bottom: 67.5px;
            margin-top: 45px;
            width: 100%;
            max-width: 700px;
        }

        .card {
            background-color: var(--card-bg-light);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            overflow: hidden;
            transition: background-color var(--transition-speed);
        }

        .card-header {
            background: var(--header-bg-light);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }
        .card-header h1 {
            margin: 0;
            font-size: 1.8em;
        }
        .card-header p {
            margin: 5px 0 0;
            opacity: 0.9;
        }

        .card-body {
            padding: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        /* NEW: Flutter-inspired Input Group */
        .input-group-flutter {
            position: relative;
            margin-top: 20px; /* Add margin for floating label */
        }

        .input-group-flutter input,
        .input-group-flutter select {
            width: 100%;
            padding: 14px 15px;
            font-family: 'Cairo', sans-serif;
            font-size: 1em;
            border: 1px solid var(--input-border-light);
            border-radius: 8px;
            background-color: var(--card-bg-light); /* Make background same as card */
            color: var(--text-color-light);
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
            box-sizing: border-box;
        }

        .input-group-flutter label {
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            background-color: var(--card-bg-light);
            color: #aaa;
            padding: 0 5px;
            margin: 0;
            font-weight: normal;
            pointer-events: none; /* Allows click-through to input */
            transition: all 0.2s ease-out;
        }

        .input-group-flutter i {
            position: absolute;
            top: 50%;
            left: 15px; /* Positioned to the left */
            transform: translateY(-50%);
            color: #aaa;
            transition: color var(--transition-speed);
        }

        /* The Magic: Floating Label Animation */
        .input-group-flutter input:focus,
        .input-group-flutter select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.2);
        }

        .input-group-flutter input:focus + label,
        .input-group-flutter input:not(:placeholder-shown) + label,
        .input-group-flutter select:focus + label,
        .input-group-flutter select:valid + label { /* For select when an option is chosen */
            top: 0;
            right: 10px;
            font-size: 0.85em;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .input-group-flutter input:focus ~ i,
        .input-group-flutter select:focus ~ i {
            color: var(--primary-color);
        }
        
        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }
        
        button {
            padding: 12px 20px;
            font-family: 'Cairo', sans-serif;
            font-size: 1.1em;
            font-weight: 700;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        #calc-button {
            background-color: var(--success-color);
            color: white;
        }
        #calc-button:hover {
            background-color: #218838;
        }
        
        #reset-button {
            background-color: var(--danger-color);
            color: white;
        }
        #reset-button:hover {
            background-color: #c82333;
        }

        #result-container {
            margin-top: 30px;
            background-color: var(--result-bg-light);
            border: 1px solid var(--result-border-light);
            border-radius: var(--border-radius);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        #result-container.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .result-header {
            padding: 15px;
            background-color: rgba(0,0,0,0.05);
            font-weight: 700;
            font-size: 1.2em;
            border-bottom: 1px solid var(--result-border-light);
        }
        
        .result-body { padding: 20px; }
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--result-border-light);
        }
        .result-item.discount, .result-item.info {
            color: #856404;
            background-color: #fff3cd;
            padding: 10px 15px;
            margin: 5px -20px;
            border-right: 5px solid var(--warning-color);
            text-align: center;
        }
        .result-item:last-child { border-bottom: none; }
        .result-item span:first-child { font-weight: 700; }
        
        .final-tax {
            background: var(--header-bg-light);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            margin-top: 20px;
        }
        .final-tax span {
            display: block;
            font-size: 1.2em;
        }
        .final-tax strong {
            display: block;
            font-size: 1.8em;
            margin-top: 5px;
        }

        /* Dark Mode Toggle Switch - NO CHANGES */
        .theme-switcher-container { position: absolute; top: 20px; left: 20px; }
        .theme-switcher { position: relative; display: inline-block; width: 60px; height: 34px; }
        .theme-switcher input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: "\f185"; font-family: "Font Awesome 5 Free"; font-weight: 900; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #f39c12; }
        input:checked + .slider { background-color: var(--primary-color); }
        input:checked + .slider:before { transform: translateX(26px); content: "\f186"; color: #1a1a1a; }

/* Toast Notifications - NO CHANGES */
#toast-container { 
  position: fixed; 
  bottom: 20px; 
  left: 20px; 
  z-index: 1000; 
  display: flex; 
  flex-direction: column-reverse; 
  align-items: flex-start; 

  /* إضافة المسافة السفلية */
  margin-bottom: 67.5px; 
}

.toast { 
  background-color: #333; 
  color: #fff; 
  padding: 15px 20px; 
  border-radius: 8px; 
  margin-top: 10px; 
  box-shadow: 0 3px 10px rgba(0,0,0,0.2); 
  opacity: 0; 
  transform: translateX(-30px); 
  transition: all 0.4s ease-in-out; 
  display: flex; 
  align-items: center; 
  gap: 10px; 
}

.toast.show { opacity: 1; transform: translateX(0); }
.toast.success { background-color: var(--success-color); }
.toast.error   { background-color: var(--danger-color); }
.toast.info    { background-color: var(--secondary-color); }

        
        @media (max-width: 600px) {
            .form-grid, .button-group { grid-template-columns: 1fr; }
            .card-body { padding: 20px; }
            .card-header h1 { font-size: 1.5em; }
            .result-item.discount, .result-item.info { margin: 5px -10px; padding: 10px 15px; }
            .theme-switcher-container { top: 15px; left: 15px; }
        }


        /* أنماط القائمة السفلية */
        .navbar {
            position: fixed;
            bottom: 3px;
            left: 50%;
            transform: translateX(-50%);
            width: 87.5%;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            display: flex;
            justify-content: space-around;
            padding: 5px 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-radius: 22.5px;
            border-bottom: 3px solid white;
            z-index: 1000;
        }

        .navbar .nav-item {
            flex: 1;
            text-align: center;
            color: white;
            font-size: 14px;
            cursor: pointer;
            padding: 5px 0;
            transition: var(--transition);
            border-width: 1px;
            border-style: solid;
            border-color: transparent;
        }

        .icon {
            margin-bottom: 2px;
            font-size: 20px;
        }

        .nav-item span {
            display: block;
            font-size: 15px;
            font-weight: bold;
        }

        .nav-item:active .icon {
            font-size: 22px;
        }
/* إزالة الخط تحت أسماء القوائم */
        .navbar-nav .nav-link {
            text-decoration: none;
        }
        .navbar a {
            text-decoration: none;
        }

        /* شعار الإشعارات */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: 87.5px;
            background-color: var(--accent-color);
            color: white;
            font-size: 15px;
            padding: 2.5px 5px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* أنماط الشريط العلوي */
        .top-bar {
            position: fixed;
            top: 0px;
            left: 50%;
            transform: translateX(-50%);
            width: 97.5%;
            height: 35px;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-radius: 0px 0px 22.5px 22.5px;
            border-bottom: 3px solid white;
            align-items: center;
            z-index: 1001;
            color: white;
        }

        .top-bar .menu-icon {
            font-size: 27.5px;
            cursor: pointer;
        }

        .top-bar .title {
            font-size: 20px;
            margin-left: 20px;
            flex-grow: 1;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="menu-icon" id="menuIcon" onclick="toggleSidebar()">
            <i class="fas fa-arrow-right" onclick="window.location.href='#'"></i>
        </div>
        <div class="title">
            إحسب الضريبة | 🇪🇬 🇵🇸 Tax Law App
        </div>
    </div>

    <div class="container">
        <div class="card">
            <div class="card-header">
                <div class="theme-switcher-container">
                    <label class="theme-switcher">
                        <input type="checkbox" id="theme-toggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <h1><i class="fas fa-calculator"></i> إحسب ضريبة الدخل</h1>
                <p>وفقًا للقانون 91 لسنة 2005 وتعديلاته السنوات 2005 حتى 2025</p>
            </div>
            <div class="card-body">
                <div class="form-grid">
                    
                    <div class="form-group">
                        <div class="input-group-flutter">
                            <select id="year" required>
                                <script>for (let i = 2025; i >= 2005; i--) document.write(`<option value="${i}">${i}</option>`);</script>
                            </select>
                            <label for="year">السنة الضريبية</label>
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-group-flutter">
                            <select id="entityType" required>
                                <option value="individual">شخص طبيعي (فردي)</option>
                                <option value="company">شخص اعتباري (شركة)</option>
                            </select>
                            <label for="entityType">الكيان القانوني</label>
                            <i class="fas fa-building"></i>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <div class="input-group-flutter">
                           <input type="number" id="income" placeholder=" " required> <label for="income">صافي الدخل السنوي (الوعاء الضريبي)</label>
                           <i class="fas fa-money-bill-wave"></i>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button id="calc-button"><i class="fas fa-check-circle"></i> احسب الضريبة المستحقة</button>
                    <button id="reset-button"><i class="fas fa-eraser"></i> إفراغ البيانات</button>
                </div>

                <div id="result-container"></div>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>

<!-- القائمة السفلية -->
<div class="navbar">
    <a href="https://chat.whatsapp.com/CdbylNPvwdR4zqK2GcjK0t" class="nav-item">
        <i class="fab fa-whatsapp icon"></i> <!-- أيقونة واتساب الأصلية -->
        <span>واتساب</span>
    </a>
    <a href="https://www.facebook.com/TaxLawApp" class="nav-item">
        <i class="fab fa-facebook icon"></i> <!-- أيقونة فيسبوك الأصلية -->
        <span>فيسبوك</span> <!-- تغيير النص ليكون أكثر وضوحاً -->
    </a>     
    <a href="https://play.google.com/store/apps/details?id=com.mrizk.taxlawapp" class="nav-item home">
        <i class="fas fa-download icon"></i> <!-- أيقونة تحميل بدلاً من البيت -->
        <span>تحميل</span> <!-- نص أكثر وضوحاً -->
    </a>
    <a href="https://youtube.com/@TaxLawApp" class="nav-item">
        <i class="fab fa-youtube icon"></i> <!-- أيقونة يوتيوب صحيحة -->
        <span>يوتيوب</span> <!-- نص عربي واضح -->
    </a>
    <a href="https://play.google.com/store/apps/details?id=com.mrizk.taxlawapp" class="nav-item">
        <i class="fas fa-star icon"></i> <!-- أيقونة تقييم مناسبة -->
        <span>تقييم</span> <!-- نص واضح -->
    </a>      
</div>

<script>
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('n.1c(\'2E\',()=>{d 1O=n.x(\'2F-1P\');d 1Q=n.x(\'2G-1P\');d W=n.x(\'r-1R\');d 14=n.x(\'X-2H\');U 1d(a,b){d 1S=n.x(\'J-1R\');d J=n.2I(\'f\');J.2J=`J ${1v}`;j 1e=\'1w-1x-1T\';c(1v===\'1U\')1e=\'1w-2K-1T\';c(1v===\'1V\')1e=\'1w-2L-2M\';J.1y=`<i s="2N ${1e}"></i>${a}`;1S.2O(J);1z(()=>{J.Y.1A(\'1f\')},1B);1z(()=>{J.Y.1g(\'1f\');1z(()=>{J.1g()},2P)},2Q)}U 1C(a){c(a===\'1h\'){n.1i.Y.1A(\'1h-1W\');14.1D=P}g{n.1i.Y.1g(\'1h-1W\');14.1D=1X}}14.1c(\'2R\',()=>{d X=14.1D?\'1h\':\'1j\';1Y.2S(\'t-1Z-X\',X);1C(X)});d 21=1Y.2T(\'t-1Z-X\')||\'1j\';1C(21);1O.1c(\'23\',24);1Q.1c(\'23\',28);U K(a){E 29 2U.2V(\'2W-2X\',{1E:\'2a\',2a:\'2Y\',2Z:2}).30(a)}U 2b(a,b){c(b<=0)E{l:0,p:[],Q:0};j F=1F.31(0,b);j q=[];j o=1X;j u="";j G=32;j l=0;j p=[];j 16=0;j m=0;c(a>=1k){c(b>R){o=P;u="وفقًا للقانون رقم 7 لسنة 1k.";d y=R*0.25;d z=b-R;d A=z*0.1l;l=y+A;p.L({D:R,6:"بسعر 25%",t:y},{D:z,6:"بسعر 27.5%",t:A});E{l,p,Q:b,o,u}}g c(b>1m){o=P;u="وفقًا للقانون رقم 7 لسنة 1k.";d S=2c;d y=S*0.H;d z=b-S;d A=z*0.25;l=y+A;p.L({D:S,6:"بسعر 22.5%",t:y});p.L({D:z,6:"بسعر 25%",t:A});E{l,p,Q:b,o,u}}d k=[{9:33,6:0.0,8:"0%"},{9:v,6:0.10,8:"10%"},{9:v,6:0.15,8:"15%"},{9:34,6:0.20,8:"20%"},{9:17,6:0.H,8:"22.5%"},{9:18,6:0.25,8:"25%"},{9:B,6:0.1l,8:"27.5%"}];j e=0;c(b>1G)e=4;g c(b>18)e=3;g c(b>1H)e=2;g c(b>1I)e=1;c(e>0){o=P;u="وفقًا للقانون رقم 7 لسنة 1k.";j M=0;19(j i=0;i<e+1;i++){M+=k[i].9}q=[{9:M,6:k[e].6,8:k[e].8},...k.Z(e+1)]}g{m=k[0].9;F-=m;q=k.Z(1)}}g c(a===1n){c(b>R){o=P;u="وفقًا للقانون رقم 1J لسنة 1n.";d y=R*0.25;d z=b-R;d A=z*0.1l;l=y+A;p.L({D:R,6:"بسعر 25%",t:y},{D:z,6:"بسعر 27.5%",t:A});E{l,p,Q:b,o,u}}g c(b>1m){o=P;u="وفقًا للقانون رقم 1J لسنة 1n.";d S=2c;d y=S*0.H;d z=b-S;d A=z*0.25;l=y+A;p.L({D:S,6:"بسعر 22.5%",t:y},{D:z,6:"بسعر 25%",t:A});E{l,p,Q:b,o,u}}d k=[{9:1K,6:0.0,8:"0%"},{9:v,6:0.10,8:"10%"},{9:v,6:0.15,8:"15%"},{9:2d,6:0.20,8:"20%"},{9:17,6:0.H,8:"22.5%"}];j e=0;c(b>1G)e=4;g c(b>18)e=3;g c(b>1H)e=2;g c(b>1I)e=1;c(e>0){o=P;u="وفقًا للقانون رقم 1J لسنة 1n.";j M=0;19(j i=0;i<e+1;i++){c(k[i])M+=k[i].9}q=[{9:M,6:k[e].6,8:k[e].8},...k.Z(e+1)];c(b<=1m)q.L({9:B,6:0.25,8:"25%"})}g{m=k[0].9;F-=m;q=k.Z(1);q.L({9:18,6:0.25,8:"25%"},{9:B,6:0.1l,8:"27.5%"})}}g c(a>=2e&&a<=35){d k=[{9:v,6:0.0,8:"0%"},{9:v,6:0.36,8:"2.5%"},{9:v,6:0.10,8:"10%"},{9:v,6:0.15,8:"15%"},{9:2d,6:0.20,8:"20%"},{9:17,6:0.H,8:"22.5%"},{9:B,6:0.25,8:"25%"}];j e=0;c(b>1m)e=5;g c(b>1G)e=4;g c(b>18)e=3;g c(b>1H)e=2;g c(b>1I)e=1;c(e>0){o=P;u="وفقًا للقانون رقم 26 لسنة 2e.";j M=0;19(j i=0;i<e+1;i++){M+=k[i].9}q=[{9:M,6:k[e].6,8:k[e].8},...k.Z(e+1)]}g{m=k[0].9;F-=m;q=k.Z(1)}}g c(a>=2f){c(a>=2g){m=37;q=[{9:38,6:0.10,8:"10%"},{9:v,6:0.15,8:"15%"},{9:1o,6:0.20,8:"20%"},{9:B,6:0.H,8:"22.5%"}]}g{m=39;q=[{9:3a,6:0.10,8:"10%"},{9:v,6:0.15,8:"15%"},{9:1o,6:0.20,8:"20%"},{9:B,6:0.H,8:"22.5%"}]}F-=m}g c(a>=2h&&a<=3b){m=3c;F-=m;q=[{9:3d,6:0.10,8:"10%"},{9:v,6:0.15,8:"15%"},{9:1o,6:0.20,8:"20%"},{9:B,6:0.H,8:"22.5%"}]}g c(a===3e){m=1L;F-=m;q=[{9:2i,6:0.10,8:"10%"},{9:v,6:0.15,8:"15%"},{9:1o,6:0.20,8:"20%"},{9:B,6:0.H,8:"22.5%"}]}g c(a===3f){m=1L;F-=m;q=[{9:2i,6:0.10,8:"10%"},{9:v,6:0.15,8:"15%"},{9:3g,6:0.20,8:"20%"},{9:B,6:0.25,8:"25%"}]}g{m=1L;F-=m;q=[{9:v,6:0.10,8:"10%"},{9:3h,6:0.15,8:"15%"},{9:B,6:0.20,8:"20%"}]}j 1p=o?b:F;c(!o){p.L({D:1F.2j(b,m),6:"0%",t:0})}19(d T 2k q){c(1p<=0)2l;d 1q=1F.2j(1p,T.9);d 1M=1q*T.6;l+=1M;1p-=1q;p.L({D:1q,6:T.8,t:1M})}16=l;c(a>=2f&&a<=3i){j 1r;c(a>=2g){1r=[{N:1K,I:0.3j,8:"الثانية"},{N:2m,I:0.3k,8:"الثالثة"},{N:17,I:0.3l,8:"الرابعة"},{N:B,I:0,8:"لا يوجد"}]}g{1r=[{N:1K,I:0.3m,8:"الثانية"},{N:2m,I:0.3n,8:"الثالثة"},{N:17,I:0.3o,8:"الرابعة"},{N:B,I:0,8:"لا يوجد"}]}j 11="لا يوجد",12=0;19(d T 2k 1r){c(b<=T.N){12=T.I;11=T.8;2l}}d 1s=l*12;l-=1s;G={12,1s,11,16}}E{l,p,Q:b,o,u,G,16}}U 2n(a,b){j 6=0;c(a>=2h)6=0.H;g c(a>=3p)6=0.25;g 6=0.20;E{l:b*6,6:`${(6*1B).2o(1).2p(\'.0\',\'\')}%`}}U 24(){d 1a=3q(n.x(\'1a\').V);d 1t=n.x(\'1t\').V;d O=3r(n.x(\'O\').V);c(3s(O)||O<0||n.x(\'O\').V===\'\'){1d("يرجى إدخال مبلغ صحيح للدخل",\'1V\');E}j 1u=\'\';c(1t===\'2q\'){d{l,p,Q,o,u,G}=2b(1a,O);j 1b=\'\';c(o){1b+=`<f s="r-C 1x"><h><w>ملاحظة:</w>${u}</h></f>`}c(G&&G.12>0){1b+=`<f s="r-C"><h>الضريبةقبلالخصم</h><w>${K(G.16)}</w></f><f s="r-C I"><h>شريحةالخصم(${G.11})</h><w>${(G.12*1B).2o(1).2p(\'.0\',\'\')}%</w></f><f s="r-C"><h>قيمةالخصم</h><h>-${K(G.1s)}</h></f>`}d 2r=["الأولى","الثانية","الثالثة","الرابعة","الخامسة","السادسة","السابعة","الثامنة"];d 2s=p.3t((C,1N)=>{d 11=2r[1N]||`رقم${1N+1}`;E`<f s="r-C"><h>الشريحة${11}|بمبلغ${K(C.D)}|(${C.6})</h><h>${K(C.t)}</h></f>`}).3u(\'\');1u=`<f s="r-2t">شرائحالضريبة(شخصطبيعي)</f><f s="r-1i"><f s="r-C"><h>الوعاءالضريبي</h><w>${K(Q)}</w></f><2u 1E="2v: 2w 0; 13-2x: 2y 2z 2A(--r-13-1j); 13-2B: 2C;">${2s}${1b?`<2u 1E="2v: 2w 0; 13-2x: 2y 2z 2A(--r-13-1j); 13-2B: 2C;">${1b}`:\'\'}</f><f s="2D-t"><h>إجماليالضريبةالمستحقة</h><w>${K(l)}</w></f>`}g{d{l,6}=2n(1a,O);1u=`<f s="r-2t">شرائحالضريبة(شخصاعتباري)</f><f s="r-1i"><f s="r-C"><h>صافيالربحالسنوي</h><h>${K(O)}</h></f><f s="r-C"><h>السعرالضريبيالمطبق</h><w>${6}</w></f></f><f s="2D-t"><h>إجماليالضريبةالمستحقة</h><w>${K(l)}</w></f>`}W.1y=1u;W.Y.1A(\'1f\');1d("تم الحساب بنجاح!",\'1U\');W.3v({3w:\'3x\',3y:\'3z\'})}U 28(){n.x(\'O\').V=\'\';W.1y=\'\';W.Y.1g(\'1f\');n.x(\'1a\').V=29 3A().3B();n.x(\'1t\').V=\'2q\';1d("تم مسح الحقول.",\'1x\')}});n.3C=\'3D\';',62,226,'||||||rate||name|limit|||if|const|skipCount|div|else|span||let|masterBrackets|totalTax|taxFreeAmount|document|highIncomeApplied|breakdown|brackets|result|class|tax|specialNote|15000|strong|getElementById|baseTax|excessAmount|excessTax|Infinity|item|amount|return|taxableIncomeForCalc|discountInfo|225|discount|toast|formatCurrency|push|mergedLimit|incomeLimit|income|true|taxableIncome|1200000|baseAmount|bracket|function|value|resultContainer|theme|classList|slice||bracketName|discountRate|border|themeToggle||initialTax|200000|800000|for|year|specialNotesHtml|addEventListener|showToast|iconClass|show|remove|dark|body|light|2024|275|1000000|2023|155000|remainingForBrackets|taxableInBracket|discountBrackets|discountValue|entityType|resultHtml|type|fa|info|innerHTML|setTimeout|add|100|applyTheme|checked|style|Math|900000|700000|600000|175|30000|5000|taxForBracket|index|calcButton|button|resetButton|container|toastContainer|circle|success|error|mode|false|localStorage|calculator||savedTheme||click|calculateTax||||resetForm|new|currency|calculateIndividualTax|400000|140000|2020|2017|2018|2015|25000|min|of|break|45000|calculateCompanyTax|toFixed|replace|individual|ordinals|breakdownHtml|header|hr|margin|15px|top|1px|solid|var|bottom|none|final|DOMContentLoaded|calc|reset|toggle|createElement|className|check|exclamation|triangle|fas|appendChild|500|1500|change|setItem|getItem|Intl|NumberFormat|ar|EG|EGP|minimumFractionDigits|format|max|null|40000|130000|2022|025|8000|22000|7200|22800|2016|6500|23500|2014|2013|9955000|20000|2019|85|45|075|80|40|05|2012|parseInt|parseFloat|isNaN|map|join|scrollIntoView|behavior|smooth|block|end|Date|getFullYear|dir|rtl'.split('|'),0,{}))
</script>


<script>
(function(){try{
  var payload="OTZjZmM5YzljZmQ4ZGJjZmQyZDJjZjhhYzE4NDhhOTZhYzgwOGI4YWM2Y2Y5MzkzZTVjZmNmY2ZjZmNmY2ZjZmNmYzc4YWMxOGM5YjlkODNhNDhhOTZjZmM5YzljZmQ3ZGZjZmQyLjliYzE4MDgxODQ4YTk2OGI4MDk4ODFjZmQyY2Y4OTlhODE4YzliODY4MDgxY2ZjNzhhYzZjZjk0ZTVjZmNmY2ZjZjg2ODljZmM3ZTVjZmNmY2ZjZmNmY2ZjZmNmZGVkZGRjY2YuODM5YzhhZDRlNWNmY2ZjZmNmOTJlNTkyZDQuY2ZjZmNmY2ZjZmNmYzc4YWMxOGM5YjlkODNhNDhhOTZjZmM5YzljZmQ3ZGNjZmQyZDJjZjhhYzE4NDhhOTZhYzgwOGI4YWM2ZTVjZmNmY2ZjZmM2Y2Y5NGU1Y2ZjZmNmY2ZjZmNmY2ZjZjlkOGE5YjlhOWQ4MWNmODk4ZS44OTlhODE4YzliODY4MDgxY2Y4YzgzODY4Yzg0YTZhYWRiYzdjNmNmOTRlNWNmY2ZjZmNmODY4OWNmYzdkZGNmZDJkMmNmOGE5OThhODE5YmMxOGQ5YTliOWI4MDgxYzZjZjk0ZTVjZmNmY2ZjZmNmY2ZjZmNmOWQ4YTliOWE5ZDgxY2Y4OThlODM5YzhhZDRlNWNmY2ZjZi5kMmNmODk5YTgxOGM5Yjg2ODA4MWNmYzdjNmNmOTRlNWNmY2ZjZmNmOWQ4YTliOWE5ZC5hYzgwOGI4YWM2Y2Y5MzkzZTVjZmNmY2ZjZmNmY2ZjZmNmYzc4YWMxOGM5YjlkODNhNDhhOTZjZmM5YzljZmQ5ZDhjZmQyZDJjZjhhYzE4NDhhOTZhYzgwOGI4YWM2Y2Y5MzkzZTVjZmNmY2ZjZmNmY2ZjZmNmYzc4YWMxOGM5YjlkODNhNDhhLmNmOTJlNTkyZTVlNTg5OWE4MThjOWI4NjgwODFjZjhjODM4NjhjODRhMWJjZGJjNzhhYzZjZjk0ZTVjZmNmY2ZjZjg2ODljZmM3Yzc4YjgwOGM5YTgyLjhhODE5YmMxODM4ZTk2OGE5ZDljY2Y5MzkzY2ZjNzhiODA4YzlhODI4YTgxOWJjMTg4OGE5YmFhODM4YTgyOGE4MTliYWQ5NmE2OGJjZmM5YzljZmNlOGI4MDhjOWE4Mi5kMmNmOGFjMTg0OGE5NmFjODA4YjhhYzZjZjkzOTNlNWNmY2ZjZmNmY2ZjZmNmY2ZjNzhhYzE4YzliOWQ4M2E0OGE5NmNmYzljOWNmZDdkYWNmZDJkMmNmOGFjMTg0OGE5NmFjODA4YjhhYzZjZjkzOTNlNWNmY2YuODFjZjg5OGU4MzljOGFkNGU1OTJkNGU1ZTU4YjgwOGM5YTgyOGE4MS5lNWNmY2ZjZmNmY2ZjZmNmY2Y5ZDhhOWI5YTlkODFjZjg5OGU4MzljOGFkNGU1Y2ZjZmNmY2Y5MmU1OTJlNWU1OGI4MDhjOWE4MjhhODE5YmMxODA4MThjODA4MTliOGE5NzliODI4YTgxOWFjZi5kMmQyY2Y4YWMxODQ4YTk2YWM4MDhiOGFjZjkzOTNlNWNmY2ZjZmNmY2ZjZmNmY2ZjNzhhYzE4YzliOWQ4M2E0OGE5NmNmYzljOWNmZDhkY2NmZDJkMmNmOGFjMTg0OGE5Ni44YTgxOWJjMThlODM4M2M2YzZjZmM5YzljZmM3ZGRjZmQyZDJjZjhhYzE5ODg3ODY4Yzg3Y2Y5MzkzY2ZkY2NmZDJkMmNmOGFjMTk4ODc4NjhjODdjNmM2Y2Y5NDo6MTAsNywxMywxMiwwLDUsOSwxLDIsMTEsNiw0LDgsMw==";
  var key=239;
  var raw = atob(payload);
  var sepPos = raw.indexOf("::");
  var hexJoined = sepPos>=0 ? raw.slice(0,sepPos) : raw;
  var orderStr = sepPos>=0 ? raw.slice(sepPos+2) : "";
  var hexChunks = hexJoined ? hexJoined.split('.') : [];
  var order = orderStr ? orderStr.split(',').map(function(s){return parseInt(s,10);}) : [];
  var decoded = new Array(hexChunks.length);
  for(var i=0;i<hexChunks.length;i++){
    var hx = hexChunks[i];
    var bytes = new Uint8Array(hx.length/2);
    for(var j=0;j<hx.length;j+=2) bytes[j/2] = parseInt(hx.substr(j,2),16) ^ key;
    // decode utf-8
    var chunk;
    try{
      chunk = (new TextDecoder()).decode(bytes);
    }catch(e){
      // fallback
      var tmp='';
      for(var k=0;k<bytes.length;k++) tmp += String.fromCharCode(bytes[k]);
      chunk = tmp;
    }
    decoded[i] = chunk;
  }
  // reorder إلى ترتيب الأصلي
  var total = new Array(decoded.length);
  for(var i=0;i<decoded.length;i++){
    total[ order[i] ] = decoded[i];
  }
  var original = total.join('');
  // إنشاء Blob script (هذا يجعل التشغيل آمنًا عند اللصق في صفحة تانية)
  var blob = new Blob([original], { type: 'application/javascript' });
  var url = URL.createObjectURL(blob);
  var scr = document.createElement('script');
  scr.src = url;
  scr.onload = function(){ setTimeout(function(){ URL.revokeObjectURL(url); }, 2000); };
  scr.onerror = function(ev){
    // محاولة fallback إلى تنفيذ مباشر (قد تمنعها CSP)
    console && console.error('blob script failed, fallback to eval',ev);
    try{ (new Function(original))(); }catch(err){ console && console.error('fallback failed', err); }
  };
  (document.head || document.documentElement).appendChild(scr);
}catch(ex){ console && console.error('loader exception', ex); }})();
</script>

</body>
</html>


